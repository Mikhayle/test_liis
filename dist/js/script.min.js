const btncCallback=document.querySelector(".btn--callback"),popupContainer=document.querySelector(".popup-container"),popup=document.querySelector(".popup"),popupSuccessModal=document.querySelector(".popup-success"),closeBtn=document.querySelector(".popup__close"),menuLinks=document.querySelectorAll(".menu__link"),Url=document.location.href,currentUrl=Url.split("/").pop();btncCallback.addEventListener("click",()=>{popupSuccessModal.classList.remove("active"),popup.classList.remove("hide"),popupContainer.classList.add("active")}),popupContainer.addEventListener("click",e=>{(e.target.classList.contains("popup__close")||e.target.classList.contains("popup-container"))&&popupContainer.classList.remove("active")}),menuLinks.forEach(e=>{const t=e.getAttribute("href");currentUrl===t&&e.classList.add("active")});let selector=document.querySelectorAll('input[type="tel"]'),im=new Inputmask("+7 (999) 999-99-99");im.mask(selector);let validateForms=(e,t,o,c)=>{new window.JustValidate(e,{rules:t,submitHandler:function(e){let t=new FormData(e),o=new XMLHttpRequest;o.onreadystatechange=()=>{4===o.readyState&&200===o.status&&(popup.classList.add("hide"),popupSuccessModal.classList.add("active"),popupContainer.classList.add("active"))},o.open("POST","mail.php",!0),o.send(t),e.reset()}})};validateForms(".popup__form",{tel:{required:!0},checkbox:{required:!0}},".thanks-popup","send goal"),validateForms(".cost__form",{tel:{required:!0},checkbox:{required:!0}},".thanks-popup","send goal"),document.querySelectorAll(".form").forEach(e=>{e.addEventListener("submit",()=>{document.querySelectorAll(".js-validate-error-label").length>0&&document.querySelectorAll(".js-validate-error-label").forEach(e=>{e.innerText="Поле обязательно для заполнения"})})});